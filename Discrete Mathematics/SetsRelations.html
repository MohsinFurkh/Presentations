<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide to Sets and Relations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: The application uses a fixed side-navigation to structure content into thematic modules (Sets, Operations, Relations, etc.). This design choice breaks the dense report into manageable, user-selectable topics, promoting both guided learning and non-linear exploration. Each module features interactive tools (e.g., a "Set Calculator", "Relation Explorer", "Hasse Diagram Generator") to transform passive reading into active engagement, which is crucial for understanding abstract mathematical concepts. The user can directly manipulate inputs and see immediate visual and analytical feedback, directly addressing the goal of making the content easily consumable and explorable. -->
    <!-- Visualization & Content Choices: 
    - **Set Operations:** Report Info: Union, Intersection, Difference definitions. -> Goal: Compare, Inform. -> Viz: Interactive text inputs for sets and buttons for operations, with results displayed textually. A Venn-like visualization will be drawn on a canvas to provide a graphical representation of the relationship between the sets. -> Interaction: User inputs sets, clicks operation buttons, sees instant results. -> Justification: Direct manipulation reinforces understanding of the operations. -> Library: Custom JS on Canvas.
    - **Relation Properties:** Report Info: Definitions of properties, matrix/digraph representations. -> Goal: Organize, Analyze. -> Viz: User inputs a relation. The app generates a Zero-One Matrix (HTML table) and a Directed Graph (custom Canvas drawing). -> Interaction: The app automatically analyzes the input relation and displays a checklist of its properties (Reflexive, Symmetric, etc.) with explanations. -> Justification: Connects the abstract definition of a property to its concrete visual representation in both matrix and graph form. -> Library: Custom JS on Canvas.
    - **Partial Orders:** Report Info: Definition of Poset, Hasse Diagrams, special elements. -> Goal: Visualize Hierarchy. -> Viz: Hasse Diagram Generator. -> Interaction: User provides a poset, the app draws the corresponding Hasse Diagram on a canvas, omitting redundant edges and highlighting maximal/minimal elements. -> Justification: Automates the complex and tedious process of drawing a Hasse diagram, allowing the user to focus on interpreting the hierarchical structure. -> Library: Custom JS on Canvas.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* Stone 100 */
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        .nav-link {
            transition: all 0.2s ease-in-out;
        }
        .nav-link.active {
            background-color: #a8a29e; /* Stone 400 */
            color: #fafaf9; /* Stone 50 */
            font-weight: 600;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
        .hasse-container {
            position: relative;
            width: 100%;
            min-height: 400px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .matrix-table td, .matrix-table th {
            border: 1px solid #d6d3d1; /* Stone 300 */
            text-align: center;
            width: 2.5rem;
            height: 2.5rem;
        }
        .form-input {
            background-color: #fafaf9; /* Stone 50 */
            border-color: #d6d3d1; /* Stone 300 */
        }
        .btn-primary {
            background-color: #78716c; /* Stone 500 */
            color: white;
        }
        .btn-primary:hover {
            background-color: #57534e; /* Stone 600 */
        }
    </style>
</head>
<body class="text-stone-800">
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">
                <img src="../images/icon.jpg" alt="Mohsin Furkh Dar Logo" style="height: 40px;">
                <div class="logo-text">
                    <span class="logo-main">Mohsin Furkh Dar</span>
                    <span class="logo-sub">PhD Candidate</span>
                </div>
            </a>
            <button class="menu-toggle" aria-label="Toggle navigation" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <ul id="mainNav">
                <li><a href="../index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="../index.html#courses"><i class="fas fa-book"></i> Courses</a></li>
                <li><a href="../index.html#lecture-notes"><i class="fas fa-file-alt"></i> Lecture Notes</a></li>
                <li><a href="../index.html#presentations"><i class="fas fa-chalkboard-teacher"></i> Presentations</a></li>
                <li><a href="../index.html#mcqs"><i class="fas fa-question-circle"></i> MCQs</a></li>
                <li><a href="../index.html#research"><i class="fas fa-flask"></i> Research</a></li>
                <li><a href="../index.html#contact"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="flex min-h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-stone-200 text-stone-700 p-4 sticky top-0 h-screen shadow-lg">
            <h1 class="text-2xl font-bold text-stone-800 mb-6">Sets & Relations</h1>
            <nav id="navigation">
                <a href="#sets" class="nav-link block p-3 rounded-lg mb-2">Introduction to Sets</a>
                <a href="#operations" class="nav-link block p-3 rounded-lg mb-2">Set Operations</a>
                <a href="#relations" class="nav-link block p-3 rounded-lg mb-2">Relations Explorer</a>
                <a href="#equivalence" class="nav-link block p-3 rounded-lg mb-2">Equivalence Relations</a>
                <a href="#posets" class="nav-link block p-3 rounded-lg mb-2">Partial Orders & Posets</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6 md:p-10 bg-stone-100">
            
            <!-- Section: Introduction to Sets -->
            <section id="sets" class="content-section">
                <h2 class="text-3xl font-bold mb-4 text-stone-900">Introduction to Sets</h2>
                <p class="mb-6 text-lg text-stone-600">This section introduces the fundamental concept of a set in mathematics. A set is a well-defined collection of distinct objects, known as elements. Explore how sets are defined and represented.</p>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-2">Definition and Representation</h3>
                    <p class="mb-4">A set is defined by its elements, where order does not matter and duplicates are ignored. For example, `{1, 2, 3}` is the same as `{3, 1, 2}`. Sets can be represented by listing elements (<strong>Roster Notation</strong>) or by describing a property they share (<strong>Set-Builder Notation</strong>).</p>
                    <div class="grid md:grid-cols-2 gap-6 mt-4">
                        <div>
                            <h4 class="font-semibold text-stone-700">Roster Notation</h4>
                            <p class="text-sm text-stone-500 mb-2">e.g., `{1, 2, 3, 4}`</p>
                            <p>Explicitly lists all elements.</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-stone-700">Set-Builder Notation</h4>
                            <p class="text-sm text-stone-500 mb-2">e.g., `{x | x is a positive integer and x < 5}`</p>
                            <p>Describes a rule for membership.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: Set Operations -->
            <section id="operations" class="content-section">
                <h2 class="text-3xl font-bold mb-4 text-stone-900">Interactive Set Operations</h2>
                 <p class="mb-6 text-lg text-stone-600">Explore fundamental set operations by defining two sets below. The tool will calculate the result of various operations and visualize the relationship between the sets. This provides a hands-on way to understand how sets can be combined and manipulated.</p>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="grid md:grid-cols-2 gap-6 mb-4">
                        <div>
                            <label for="setA" class="block font-semibold mb-2">Set A (comma-separated, e.g., 1,2,3,4)</label>
                            <input type="text" id="setA" class="form-input w-full p-2 border rounded" value="1, 2, 3, 4">
                        </div>
                        <div>
                            <label for="setB" class="block font-semibold mb-2">Set B (e.g., 3,4,5,6)</label>
                            <input type="text" id="setB" class="form-input w-full p-2 border rounded" value="3, 4, 5, 6">
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-6">
                        <button id="unionBtn" class="btn-primary px-4 py-2 rounded-lg">Union (A ∪ B)</button>
                        <button id="intersectionBtn" class="btn-primary px-4 py-2 rounded-lg">Intersection (A ∩ B)</button>
                        <button id="diffABBtn" class="btn-primary px-4 py-2 rounded-lg">Difference (A - B)</button>
                        <button id="diffBABtn" class="btn-primary px-4 py-2 rounded-lg">Difference (B - A)</button>
                    </div>
                    <div class="bg-stone-50 p-4 rounded-lg">
                        <h4 class="font-semibold">Result:</h4>
                        <p id="operationResult" class="text-lg font-mono tracking-wider">{}</p>
                    </div>

                    <div class="mt-8">
                         <h3 class="text-xl font-semibold mb-4 text-center">Set Visualization</h3>
                         <div class="chart-container">
                            <canvas id="vennDiagram"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: Relations -->
            <section id="relations" class="content-section">
                <h2 class="text-3xl font-bold mb-4 text-stone-900">Relation Explorer</h2>
                <p class="mb-6 text-lg text-stone-600">A relation describes a connection between elements of sets. This tool allows you to define a set and a binary relation on it. It will then automatically generate the matrix and directed graph (digraph) representations and analyze its fundamental properties.</p>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="grid md:grid-cols-2 gap-6 mb-4">
                        <div>
                            <label for="relSet" class="block font-semibold mb-2">Set X (e.g., 1,2,3)</label>
                            <input type="text" id="relSet" class="form-input w-full p-2 border rounded" value="1, 2, 3">
                        </div>
                        <div>
                            <label for="relPairs" class="block font-semibold mb-2">Relation R as ordered pairs (e.g., (1,1),(1,2),(2,3))</label>
                            <input type="text" id="relPairs" class="form-input w-full p-2 border rounded" value="(1,1), (1,2), (2,2), (3,3)">
                        </div>
                    </div>
                    <button id="analyzeRelationBtn" class="btn-primary px-6 py-2 rounded-lg mb-6">Analyze Relation</button>

                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-semibold mb-4">Relation Properties</h3>
                            <div id="relationProperties" class="space-y-2"></div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-4">Zero-One Matrix</h3>
                            <div id="relationMatrix" class="overflow-x-auto"></div>
                        </div>
                        <div class="md:col-span-2">
                             <h3 class="text-xl font-semibold mb-4 text-center">Directed Graph (Digraph)</h3>
                             <div class="hasse-container bg-stone-50 rounded-lg">
                                <canvas id="digraphCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Section: Equivalence Relations -->
            <section id="equivalence" class="content-section">
                <h2 class="text-3xl font-bold mb-4 text-stone-900">Equivalence Relations & Classes</h2>
                <p class="mb-6 text-lg text-stone-600">An equivalence relation partitions a set into disjoint subsets called equivalence classes. Elements within the same class are considered "equivalent." This tool demonstrates this concept by identifying the classes for a given equivalence relation.</p>
                <div class="bg-white p-6 rounded-lg shadow-md">
                     <p class="mb-4">An equivalence relation must be <strong>Reflexive</strong>, <strong>Symmetric</strong>, and <strong>Transitive</strong>. Let's explore the classic example: congruence modulo n.</p>
                     <div class="flex items-end gap-4 mb-4">
                        <div>
                            <label for="equivSetSize" class="block font-semibold mb-2">Set: {0, 1, ..., N}</label>
                            <input type="number" id="equivSetSize" class="form-input w-24 p-2 border rounded" value="10" min="1" max="20">
                        </div>
                         <div>
                            <label for="equivMod" class="block font-semibold mb-2">Relation: a ≡ b (mod n)</label>
                            <input type="number" id="equivMod" class="form-input w-24 p-2 border rounded" value="3" min="2" max="10">
                        </div>
                         <button id="equivBtn" class="btn-primary px-6 py-2 rounded-lg">Find Equivalence Classes</button>
                    </div>
                    <div id="equivResult" class="mt-6">
                        <h3 class="text-xl font-semibold mb-4">Equivalence Classes:</h3>
                        <div id="equivClassesContainer" class="flex flex-wrap gap-4"></div>
                    </div>
                </div>
            </section>
            
            <!-- Section: Posets -->
            <section id="posets" class="content-section">
                <h2 class="text-3xl font-bold mb-4 text-stone-900">Partial Orders & Hasse Diagrams</h2>
                <p class="mb-6 text-lg text-stone-600">A partial order establishes a hierarchy on a set. Unlike a total order, not all elements need to be comparable. A Hasse diagram is a simplified graph for visualizing a partial order. This tool automatically generates one for the "divides" relation.</p>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <p class="mb-4">A partial order must be <strong>Reflexive</strong>, <strong>Antisymmetric</strong>, and <strong>Transitive</strong>. A common example is the "divides" relation on a set of integers.</p>
                    <div class="flex items-end gap-4 mb-4">
                         <div>
                            <label for="posetSet" class="block font-semibold mb-2">Set of Integers (e.g., 1,2,3,4,6,12)</label>
                            <input type="text" id="posetSet" class="form-input w-full p-2 border rounded" value="1,2,3,4,6,8,12">
                        </div>
                         <button id="hasseBtn" class="btn-primary px-6 py-2 rounded-lg">Generate Hasse Diagram</button>
                    </div>
                     <div class="grid md:grid-cols-2 gap-8 mt-6">
                         <div class="md:col-span-2">
                             <h3 class="text-xl font-semibold mb-4 text-center">Hasse Diagram for "Divides" Relation</h3>
                             <div class="hasse-container bg-stone-50 rounded-lg">
                                <canvas id="hasseDiagram"></canvas>
                            </div>
                         </div>
                        <div>
                             <h3 class="text-xl font-semibold mb-4">Special Elements</h3>
                             <div id="posetElements"></div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const navigationLinks = document.querySelectorAll('#navigation a');
    const contentSections = document.querySelectorAll('.content-section');

    function navigateTo(hash) {
        // Fallback to the first link if hash is invalid or empty
        if (!hash || !document.querySelector(hash)) {
            hash = navigationLinks[0].hash;
        }
        
        navigationLinks.forEach(link => {
            if (link.hash === hash) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });

        contentSections.forEach(section => {
            if ('#' + section.id === hash) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        });
    }

    navigationLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const hash = e.currentTarget.hash;
            window.location.hash = hash;
            navigateTo(hash);
        });
    });

    navigateTo(window.location.hash);

    // --- SET OPERATIONS LOGIC ---
    const setAInput = document.getElementById('setA');
    const setBInput = document.getElementById('setB');
    const operationResultEl = document.getElementById('operationResult');
    let vennChart = null;

    function parseSet(str) {
        if (!str.trim()) return new Set();
        return new Set(str.split(',').map(s => s.trim()).filter(Boolean));
    }

    function formatSet(set) {
        return `{${[...set].sort((a,b) => String(a).localeCompare(String(b), undefined, {numeric: true})).join(', ')}}`;
    }

    function updateVennDiagram(setA, setB) {
        const intersection = new Set([...setA].filter(x => setB.has(x)));
        const diffAB = new Set([...setA].filter(x => !setB.has(x)));
        const diffBA = new Set([...setB].filter(x => !setA.has(x)));

        const ctx = document.getElementById('vennDiagram').getContext('2d');
        if (vennChart) {
            vennChart.destroy();
        }
        vennChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: [`A only (${diffAB.size})`, `B only (${diffBA.size})`, `A & B (${intersection.size})`],
                datasets: [{
                    data: [diffAB.size, diffBA.size, intersection.size],
                    backgroundColor: ['rgba(239, 68, 68, 0.6)', 'rgba(59, 130, 246, 0.6)', 'rgba(168, 85, 247, 0.6)'],
                    borderColor: ['#f87171', '#60a5fa', '#c084fc'],
                    borderWidth: 2,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                         callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                let value = context.raw;
                                label += value;
                                
                                let elements = [];
                                if(context.label.startsWith('A only')) elements = [...diffAB];
                                if(context.label.startsWith('B only')) elements = [...diffBA];
                                if(context.label.startsWith('A & B')) elements = [...intersection];
                                
                                if (elements.length > 0) {
                                    const sample = elements.slice(0, 5).join(', ');
                                    label += ` (${sample}${elements.length > 5 ? '...' : ''})`;
                                }

                                return label;
                            }
                        }
                    }
                }
            }
        });
    }

    function performSetOperation(operation) {
        const setA = parseSet(setAInput.value);
        const setB = parseSet(setBInput.value);
        let resultSet;

        switch (operation) {
            case 'union':
                resultSet = new Set([...setA, ...setB]);
                break;
            case 'intersection':
                resultSet = new Set([...setA].filter(x => setB.has(x)));
                break;
            case 'diffAB':
                resultSet = new Set([...setA].filter(x => !setB.has(x)));
                break;
            case 'diffBA':
                resultSet = new Set([...setB].filter(x => !setA.has(x)));
                break;
        }
        operationResultEl.textContent = formatSet(resultSet);
        updateVennDiagram(setA, setB);
    }
    
    document.getElementById('unionBtn').addEventListener('click', () => performSetOperation('union'));
    document.getElementById('intersectionBtn').addEventListener('click', () => performSetOperation('intersection'));
    document.getElementById('diffABBtn').addEventListener('click', () => performSetOperation('diffAB'));
    document.getElementById('diffBABtn').addEventListener('click', () => performSetOperation('diffBA'));

    // Initial call
    performSetOperation('union');


    // --- RELATION EXPLORER LOGIC ---
    const relSetInput = document.getElementById('relSet');
    const relPairsInput = document.getElementById('relPairs');
    const analyzeRelationBtn = document.getElementById('analyzeRelationBtn');

    function parseRelationPairs(str) {
        const pairs = [];
        const regex = /\(\s*([^,]+)\s*,\s*([^)]+)\s*\)/g;
        let match;
        while ((match = regex.exec(str)) !== null) {
            pairs.push([match[1].trim(), match[2].trim()]);
        }
        return pairs;
    }
    
    function drawDigraph(canvas, elements, pairs) {
        const ctx = canvas.getContext('2d');
        const { width, height } = canvas.getBoundingClientRect();
        canvas.width = width;
        canvas.height = height;
        ctx.clearRect(0, 0, width, height);

        const radius = Math.min(width, height) / 2 - 40;
        const center = { x: width / 2, y: height / 2 };
        const nodeRadius = 15;
        const positions = {};

        elements.forEach((el, i) => {
            const angle = (i / elements.length) * 2 * Math.PI - Math.PI / 2;
            positions[el] = {
                x: center.x + radius * Math.cos(angle),
                y: center.y + radius * Math.sin(angle),
            };
        });

        function drawArrow(from, to, color = 'black') {
            const headlen = 10;
            const dx = to.x - from.x;
            const dy = to.y - from.y;
            const angle = Math.atan2(dy, dx);
            
            ctx.beginPath();
            ctx.moveTo(from.x, from.y);
            ctx.lineTo(to.x, to.y);
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(to.x, to.y);
            ctx.lineTo(to.x - headlen * Math.cos(angle - Math.PI / 6), to.y - headlen * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(to.x - headlen * Math.cos(angle + Math.PI / 6), to.y - headlen * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();
        }

        pairs.forEach(([a, b]) => {
            if (!positions[a] || !positions[b]) return;
            
            if (a === b) { // Loop
                const pos = positions[a];
                ctx.beginPath();
                ctx.arc(pos.x - nodeRadius, pos.y - nodeRadius, nodeRadius*0.8, 0, 2 * Math.PI);
                ctx.strokeStyle = '#a855f7';
                ctx.lineWidth = 2;
                ctx.stroke();
            } else {
                const from = positions[a];
                const to = positions[b];
                const angle = Math.atan2(to.y - from.y, to.x - from.x);
                
                const toPos = {
                    x: to.x - nodeRadius * Math.cos(angle),
                    y: to.y - nodeRadius * Math.sin(angle)
                };
                const fromPos = {
                    x: from.x + nodeRadius * Math.cos(angle),
                    y: from.y + nodeRadius * Math.sin(angle)
                };

                drawArrow(fromPos, toPos, '#4f46e5');
            }
        });
        
        elements.forEach(el => {
            const pos = positions[el];
            ctx.beginPath();
            ctx.arc(pos.x, pos.y, nodeRadius, 0, 2 * Math.PI);
            ctx.fillStyle = '#f5f3ff';
            ctx.fill();
            ctx.strokeStyle = '#6366f1';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = '#312e81';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.font = 'bold 14px Inter';
            ctx.fillText(el, pos.x, pos.y);
        });
    }

    analyzeRelationBtn.addEventListener('click', () => {
        const elements = [...parseSet(relSetInput.value)];
        const pairs = parseRelationPairs(relPairsInput.value);
        const pairSet = new Set(pairs.map(p => p.join(',')));

        const isReflexive = elements.every(el => pairSet.has(`${el},${el}`));
        const isSymmetric = pairs.every(([a, b]) => a === b || pairSet.has(`${b},${a}`));
        const isAntisymmetric = pairs.every(([a, b]) => a === b || !pairSet.has(`${b},${a}`));
        
        let isTransitive = true;
        for (const [a, b] of pairs) {
            for (const [c, d] of pairs) {
                if (b === c && !pairSet.has(`${a},${d}`)) {
                    isTransitive = false;
                    break;
                }
            }
            if (!isTransitive) break;
        }

        const properties = [
            { name: 'Reflexive', value: isReflexive, desc: 'Every element is related to itself (aRa).' },
            { name: 'Symmetric', value: isSymmetric, desc: 'If aRb, then bRa.' },
            { name: 'Antisymmetric', value: isAntisymmetric, desc: 'If aRb and bRa, then a=b.' },
            { name: 'Transitive', value: isTransitive, desc: 'If aRb and bRc, then aRc.' }
        ];

        document.getElementById('relationProperties').innerHTML = properties.map(p => `
            <div class="flex items-center p-2 rounded-lg ${p.value ? 'bg-emerald-100 text-emerald-800' : 'bg-rose-100 text-rose-800'}">
                <span class="mr-3 font-bold text-lg">${p.value ? '✔' : '✖'}</span>
                <div>
                    <span class="font-semibold">${p.name}</span>
                    <p class="text-sm">${p.desc}</p>
                </div>
            </div>
        `).join('');

        const matrixContainer = document.getElementById('relationMatrix');
        let tableHTML = '<table class="matrix-table w-full border-collapse"><thead><tr><th></th>';
        elements.forEach(el => tableHTML += `<th>${el}</th>`);
        tableHTML += '</tr></thead><tbody>';
        elements.forEach(rowEl => {
            tableHTML += `<tr><th class="bg-stone-100">${rowEl}</th>`;
            elements.forEach(colEl => {
                tableHTML += `<td>${pairSet.has(`${rowEl},${colEl}`) ? 1 : 0}</td>`;
            });
            tableHTML += '</tr>';
        });
        tableHTML += '</tbody></table>';
        matrixContainer.innerHTML = tableHTML;

        drawDigraph(document.getElementById('digraphCanvas'), elements, pairs);
    });
    
    // --- EQUIVALENCE RELATION LOGIC ---
    document.getElementById('equivBtn').addEventListener('click', () => {
        const n = parseInt(document.getElementById('equivSetSize').value);
        const mod = parseInt(document.getElementById('equivMod').value);
        const set = Array.from({length: n + 1}, (_, i) => i);
        const classes = {};

        set.forEach(el => {
            const remainder = el % mod;
            if (!classes[remainder]) {
                classes[remainder] = [];
            }
            classes[remainder].push(el);
        });

        const container = document.getElementById('equivClassesContainer');
        container.innerHTML = Object.values(classes).map(c => `
            <div class="p-4 bg-amber-100 text-amber-800 rounded-lg border border-amber-200 shadow-sm">
                <p class="font-mono text-lg">{${c.join(', ')}}</p>
            </div>
        `).join('');
    });
    
    // --- POSET & HASSE DIAGRAM LOGIC ---
    document.getElementById('hasseBtn').addEventListener('click', () => {
        const setStr = document.getElementById('posetSet').value;
        const elements = [...new Set(setStr.split(',').map(n => parseInt(n.trim())).filter(Number.isInteger))].sort((a,b) => a-b);
        
        const pairs = [];
        elements.forEach(a => {
            elements.forEach(b => {
                if (a !== b && b % a === 0) {
                    pairs.push([a, b]);
                }
            });
        });
        
        // Transitive reduction (cover relation)
        const coverPairs = pairs.filter(([a, b]) => {
            return !pairs.some(([x, y]) => a === x && b !== y && b % y === 0 && y % a === 0);
        });
        
        drawHasseDiagram(document.getElementById('hasseDiagram'), elements, coverPairs);
    });

    function drawHasseDiagram(canvas, elements, coverPairs) {
        const ctx = canvas.getContext('2d');
        const { width, height } = canvas.getBoundingClientRect();
        canvas.width = width;
        canvas.height = height;
        ctx.clearRect(0, 0, width, height);

        if(elements.length === 0) return;

        // Determine levels (ranks)
        const levels = {};
        const adj = {};
        elements.forEach(el => { adj[el] = []; levels[el] = 0; });
        coverPairs.forEach(([a, b]) => adj[a].push(b));
        
        const sortedElements = [...elements].sort((a,b) => {
             const aDivisors = elements.filter(d => a % d === 0).length;
             const bDivisors = elements.filter(d => b % d === 0).length;
             return aDivisors - bDivisors;
        });

        const ranks = new Map();
        sortedElements.forEach(u => {
            let maxRank = -1;
            elements.forEach(v => {
                 if(coverPairs.some(p => p[0] === v && p[1] === u)) {
                     if(ranks.get(v) > maxRank) {
                         maxRank = ranks.get(v);
                     }
                 }
            });
            ranks.set(u, maxRank + 1);
        });

        const maxRank = Math.max(...ranks.values());
        const levelCounts = Array(maxRank + 1).fill(0);
        ranks.forEach(rank => levelCounts[rank]++);

        const positions = {};
        const levelXOffsets = Array(maxRank + 1).fill(0);

        elements.forEach(el => {
            const rank = ranks.get(el);
            const levelWidth = levelCounts[rank];
            const xOffset = levelXOffsets[rank];
            
            const y = height - (rank / maxRank) * (height - 80) - 40;
            const x = (width / (levelWidth + 1)) * (xOffset + 1);

            positions[el] = { x, y };
            levelXOffsets[rank]++;
        });

        // Draw lines
        coverPairs.forEach(([a, b]) => {
            const from = positions[a];
            const to = positions[b];
            ctx.beginPath();
            ctx.moveTo(from.x, from.y);
            ctx.lineTo(to.x, to.y);
            ctx.strokeStyle = '#57534e';
            ctx.lineWidth = 1.5;
            ctx.stroke();
        });

        // Draw nodes
        const nodeRadius = 18;
        elements.forEach(el => {
            const pos = positions[el];
            ctx.beginPath();
            ctx.arc(pos.x, pos.y, nodeRadius, 0, 2 * Math.PI);
            ctx.fillStyle = '#e7e5e4'; // stone-200
            ctx.fill();
            ctx.strokeStyle = '#a8a29e'; // stone-400
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = '#3f3f46'; // stone-700
            ctx.font = 'bold 14px Inter';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(el, pos.x, pos.y);
        });
        
        // Find special elements
        const adjList = {};
        const revAdjList = {};
        elements.forEach(el => { adjList[el] = new Set(); revAdjList[el] = new Set(); });
        coverPairs.forEach(([u, v]) => { adjList[u].add(v); revAdjList[v].add(u); });

        const minimal = elements.filter(el => revAdjList[el].size === 0);
        const maximal = elements.filter(el => adjList[el].size === 0);
        const least = minimal.length === 1 ? minimal[0] : null;
        const greatest = maximal.length === 1 ? maximal[0] : null;

        document.getElementById('posetElements').innerHTML = `
            <p class="mb-2"><strong class="font-semibold">Minimal:</strong> ${minimal.join(', ')}</p>
            <p class="mb-2"><strong class="font-semibold">Maximal:</strong> ${maximal.join(', ')}</p>
            <p class="mb-2"><strong class="font-semibold">Least:</strong> ${least !== null ? least : 'None'}</p>
            <p class="mb-2"><strong class="font-semibold">Greatest:</strong> ${greatest !== null ? greatest : 'None'}</p>
        `;
    }


    // Trigger initial calculations
    document.getElementById('analyzeRelationBtn').click();
    document.getElementById('equivBtn').click();
    document.getElementById('hasseBtn').click();
});

</script>

<nav class="site-nav">
    <div class="nav-container">
        <div class="nav-logo">
            <a href="../index.html">
                <img src="../img/logo.png" alt="Logo">
            </a>
        </div>
        <div class="nav-links">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../index.html#courses">Courses</a></li>
                <li><a href="../index.html#lecture-notes">Lecture Notes</a></li>
                <li><a href="../index.html#presentations">Presentations</a></li>
                <li><a href="../index.html#mcqs">MCQs</a></li>
                <li><a href="../index.html#research">Research</a></li>
                <li><a href="../index.html#contact">Contact</a></li>
            </ul>
        </div>
    </div>
</nav>

<footer class="site-footer">
    <div class="footer-container">
        <div class="footer-section">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../index.html#courses">Courses</a></li>
                <li><a href="../index.html#lecture-notes">Lecture Notes</a></li>
                <li><a href="../index.html#presentations">Presentations</a></li>
                <li><a href="../index.html#mcqs">MCQs</a></li>
                <li><a href="../index.html#research">Research</a></li>
                <li><a href="../index.html#contact">Contact</a></li>
            </ul>
        </div>
        
        <div class="footer-section">
            <h4>University Links</h4>
            <ul>
                <li><a href="https://uohyd.ac.in" target="_blank">University of Hyderabad</a></li>
                <li><a href="https://scis.uohyd.ac.in" target="_blank">SCIS Department</a></li>
                <li><a href="#">Academic Calendar</a></li>
                <li><a href="#">Library Resources</a></li>
            </ul>
        </div>
        
        <div class="footer-section">
            <h4>Connect</h4>
            <div class="social-links">
                <a href="https://scholar.google.com" target="_blank" aria-label="Google Scholar"><i class="fab fa-google scholar-icon"></i></a>
                <a href="https://linkedin.com" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="https://github.com" target="_blank" aria-label="GitHub"><i class="fab fa-github"></i></a>
                <a href="https://twitter.com" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="https://orcid.org" target="_blank" aria-label="ORCID"><i class="fab fa-orcid"></i></a>
            </div>
            <div class="newsletter">
                <p>Subscribe to my newsletter for updates</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Your email address" required>
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>
        </div>
    </div>
    
    <div class="footer-bottom">
        <div class="footer-container">
            <p>&copy; 2025 Dr. Mohsin Furkh Dar. All rights reserved.</p>
            <div class="footer-legal">
                <a href="#">Privacy Policy</a>
                <span>|</span>
                <a href="#">Terms of Use</a>
                <span>|</span>
                <a href="#">Accessibility</a>
            </div>
        </div>
    </div>
</footer>

<script src="../js/script.js"></script>
</body>
</html>
